<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="Hzx=J[{z4B`v6uGdXxur">drvOn</variable><variable id="7bbduCH]326vk@lUN{h+">SLP</variable><variable id="W;FwW~N`6tr(8P(y)Go0">b</variable><variable id="N%1o%_N5SiQ9u?/zpNQP">L_B</variable><variable id="`pBtjpP-Ei3F0vj{h?v}">ticksL</variable><variable id="W,8tdwfFeiIr(H(ZC{AA">step</variable><variable id="3#]IKQPslAXw7RdIBw)n">c</variable><variable id="v{yk]0)?K0$Y{VF3sn/%">R_B</variable><variable id=";ENffnQgd%Eu^s0joRFZ">ticksR</variable><variable id=".?n4b.SyNme{S5YF*m#k">step2</variable><variable id="_W3LD7@JPO[~J)E[8ZtR">L_A</variable><variable id="WF[%)}OF^w0~[/P{QeLg">R_A</variable><variable id="wyg-9GTZj13.h[39P,F1">now</variable><variable id="7leC#-KsQ:=KByR9T)O4">dt2</variable><variable id="J8=ar[wijTU9-Q+dz|2H">lastPidMs</variable><variable id="^_C/Cdx7kVQdFB)Yf1pV">pidPeriodMs</variable><variable id="vf;]+o__WRvEX,HmuB$V">dL</variable><variable id="#E+#+_/w/f=:TV`)5hbC">lastTicksL</variable><variable id="w*Rt%3ASSMC]k^}+@75[">dR</variable><variable id="{|-G#G|bS1Da]1!j4S`f">lastTicksR</variable><variable id="Z~xLIw]@-1oB^VK6nN5=">PPR_L</variable><variable id="Wc@~Y_2|L;BDr`[k|_eb">PPR_R</variable><variable id="JOi6`~+X,o|;c1|S@(gA">WHEEL_DIAMETER_MM</variable><variable id="lUmHAt{H32p-E-yW.bC/">TRACK_WIDTH_MM</variable><variable id="r3ZTxY`f3:7O;{KI]^RM">DEFAULT_RPM</variable><variable id="Ph^sGnM]]@6,)Ks|w9L@">LEFT_IN1</variable><variable id="`I}4Twu)?yFgrlPn+p%/">LEFT_IN2</variable><variable id="T5X63KV2./8bU$^E1_Pl">RIGHT_IN1</variable><variable id="1)nZwEA`24aBCKg8@aa1">RIGHT_IN2</variable></variables><comment id="?*t?D9W8])3ESIl=y-1R" x="3041.359375" y="8137" w="260" h="120">
==== interner Zustand ====
</comment><block type="pxt-on-start" id="v5[2`U@2rJ5GD|,Zz%Fk" x="20" y="20"><statement name="HANDLER"><block type="typescript_statement" id="0[tMYL(s7WN3xZ2*8y;6"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let setRpmR = 0" numlines="1" declaredvars="setRpmR"></mutation><next><block type="typescript_statement" id="9n|!GXTJG6st1|vtE]YP"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let setRpmL = 0" numlines="1" declaredvars="setRpmL"></mutation><next><block type="typescript_statement" id="Rs/pFGUV*mBSj*JP;5W7"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let rpmR = 0" numlines="1" declaredvars="rpmR"></mutation><next><block type="typescript_statement" id="UMMV7y@k*#t`^1W#Q{=}"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let rpmL = 0" numlines="1" declaredvars="rpmL"></mutation><next><block type="typescript_statement" id="Ib!g1`VcFJ@7b+k-ROn*"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let ticksR = 0" numlines="1" declaredvars="ticksR"></mutation><next><block type="typescript_statement" id="!NYh?*MzPa30$p5fU7g9"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let ticksL = 0" numlines="1" declaredvars="ticksL"></mutation><next><block type="typescript_statement" id="bK#83!28D3zDo.]ccn=#"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let INVERT_RIGHT = false" numlines="1" declaredvars="INVERT_RIGHT"></mutation><next><block type="typescript_statement" id="RFrV0k.^r`G}x,-rRaEw"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let INVERT_LEFT = false" numlines="1" declaredvars="INVERT_LEFT"></mutation><comment pinned="false" h="80" w="160">Richtung umkehren (falls Verdrahtung andersherum)</comment><next><block type="typescript_statement" id="aP;.5H7fc%2dAcRB{hw}"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="enum Motoren { Links = 0, Rechts = 1, Beide = 2 }" numlines="1"></mutation><next><block type="typescript_statement" id="tR.:!e1QZMf+_hu#if$8"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="enum Direction { Forward = 0, Backwards = 1 }" numlines="1"></mutation><next><block type="typescript_statement" id="gSEI_];eaI+|g/uXE%o/"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="enum Dir { Links = 0, Rechts = 1 }" numlines="1"></mutation><next><block type="variables_set" id="8NJN0_3g8(*wa|z)2Y#B"><field name="VAR" id="Ph^sGnM]]@6,)Ks|w9L@">LEFT_IN1</field><comment pinned="false" h="80" w="160">==== PIN DEFAULTS (können überschrieben werden) ====</comment><value name="VALUE"><shadow type="math_number" id="s}G;zZk9^$5iA!(hI,x]"><field name="NUM">0</field></shadow><block type="digital_pin" id="ZTGZVks5KyCH_Rh9ypdM"><field name="pin">DigitalPin.P1</field></block></value><next><block type="variables_set" id="N{Xlz^N:++fF(0,Wr2vw"><field name="VAR" id="`I}4Twu)?yFgrlPn+p%/">LEFT_IN2</field><value name="VALUE"><shadow type="math_number" id="cM*M2zqLC:!(H.!iJY?#"><field name="NUM">0</field></shadow><block type="digital_pin" id="BYU6`vf/TMXb(;J+g(6M"><field name="pin">DigitalPin.P0</field></block></value><next><block type="variables_set" id="YUU_JhKLrBTKVsa8xB7L"><field name="VAR" id="T5X63KV2./8bU$^E1_Pl">RIGHT_IN1</field><value name="VALUE"><shadow type="math_number" id="DvVl|.9Wq-G7#34]iiLB"><field name="NUM">0</field></shadow><block type="digital_pin" id="Q^yEXMzo5CKU56si4}@,"><field name="pin">DigitalPin.P14</field></block></value><next><block type="variables_set" id="GrGM35=z|w6SM((2GSg6"><field name="VAR" id="1)nZwEA`24aBCKg8@aa1">RIGHT_IN2</field><value name="VALUE"><shadow type="math_number" id="(u3(7deG2Z27`6*-:A2w"><field name="NUM">0</field></shadow><block type="digital_pin" id="0aS4y+#H+0A%-Ag;KgJ="><field name="pin">DigitalPin.P15</field></block></value><next><block type="variables_set" id="-3G=YqX9rDpO1nYH6P|C"><field name="VAR" id="7bbduCH]326vk@lUN{h+">SLP</field><value name="VALUE"><shadow type="math_number" id="3gVa8[HRYc)ex2TNGF+4"><field name="NUM">0</field></shadow><block type="digital_pin" id="2iWkct=Jcyq=P.7xI+4a"><field name="pin">DigitalPin.C8</field></block></value><next><block type="variables_set" id="mRwK;a7DZ9@`VwniN,0_"><field name="VAR" id="_W3LD7@JPO[~J)E[8ZtR">L_A</field><comment pinned="false" h="80" w="160">Encoder: A/B je Seite (können überschrieben werden)</comment><value name="VALUE"><shadow type="math_number" id="GX9,nv$xf?(}MW:bD4Cg"><field name="NUM">0</field></shadow><block type="digital_pin" id="9t.5M$vW3xLno`Ll]87a"><field name="pin">DigitalPin.P3</field></block></value><next><block type="variables_set" id="M,Vy0_x]5KYnh1Y]UYA/"><field name="VAR" id="N%1o%_N5SiQ9u?/zpNQP">L_B</field><value name="VALUE"><shadow type="math_number" id="}-g1du~*[xi:hrn{7C31"><field name="NUM">0</field></shadow><block type="digital_pin" id=".]~y49maqH/w-#!5Ij}}"><field name="pin">DigitalPin.P4</field></block></value><next><block type="variables_set" id="qQv-8kwWAXV%b0q4_qlf"><field name="VAR" id="WF[%)}OF^w0~[/P{QeLg">R_A</field><value name="VALUE"><shadow type="math_number" id="}(Za8qJtYGmmLzn|Z,p3"><field name="NUM">0</field></shadow><block type="digital_pin" id="wzN4o(wJQgqeyGEE)C0e"><field name="pin">DigitalPin.P6</field></block></value><next><block type="variables_set" id="JEAR0r;/qb)zyB{X!wf0"><field name="VAR" id="v{yk]0)?K0$Y{VF3sn/%">R_B</field><value name="VALUE"><shadow type="math_number" id="knjufuadw?[92|R#8/Gg"><field name="NUM">0</field></shadow><block type="digital_pin" id="oh6xgtqIrj)sR9nD}]yp"><field name="pin">DigitalPin.P7</field></block></value><next><block type="variables_set" id="[iA79;a^!x=[g,YzM3Wj"><field name="VAR" id="Z~xLIw]@-1oB^VK6nN5=">PPR_L</field><comment pinned="false" h="80" w="160">Auflösung (in Ticks, so wie wir sie zählen; beide Flanken von A!)</comment><value name="VALUE"><shadow type="math_number" id="f(|q=kR]-PdlSt%1yhc9"><field name="NUM">360</field></shadow></value><next><block type="variables_set" id="!K,Sh}/89^58Ov-K)Wza"><field name="VAR" id="Wc@~Y_2|L;BDr`[k|_eb">PPR_R</field><value name="VALUE"><shadow type="math_number" id="*3.?SqGG7uq]OoQV6%.1"><field name="NUM">360</field></shadow></value><next><block type="variables_set" id="dTdZ#jHQ`cuu^||+EKAy"><field name="VAR" id="JOi6`~+X,o|;c1|S@(gA">WHEEL_DIAMETER_MM</field><comment pinned="false" h="80" w="160">Robotik-Geometrie (für turn()) – kann überschrieben werden</comment><value name="VALUE"><shadow type="math_number" id="f-_W5Hq@Ite]8a4S:1-#"><field name="NUM">60</field></shadow></value><next><block type="variables_set" id="DX!E2~/l$v=RA#vyiw^~"><field name="VAR" id="lUmHAt{H32p-E-yW.bC/">TRACK_WIDTH_MM</field><value name="VALUE"><shadow type="math_number" id="w~@|}eMKpg+-3k_%JsI7"><field name="NUM">120</field></shadow></value><next><block type="variables_set" id="7DsoJ[=:kojKx}u;*f_I"><field name="VAR" id="r3ZTxY`f3:7O;{KI]^RM">DEFAULT_RPM</field><comment pinned="false" h="80" w="160">Default‑RPM für forward(), wenn kein RPM übergeben wird</comment><value name="VALUE"><shadow type="math_number" id="/x7B/8OQy|_q;7n|Z,7h"><field name="NUM">50</field></shadow></value><next><block type="typescript_statement" id="4/bGZC6Vju0~-I=7`YDs"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="class PID {" line1="    kp: number" line2="    ki: number" line3="    kd: number" line4="    i = 0" line5="    lastE = 0" line6="    outMin = -1023" line7="    outMax = 1023" line8="    constructor(kp: number, ki: number, kd: number) { this.kp = kp; this.ki = ki; this.kd = kd }" line9="    reset() { this.i = 0; this.lastE = 0 }" line10="    update(setpoint: number, measured: number, dtMs: number) {" line11="        const dt = Math.max(dtMs, 1) / 1000 // s" line12="        const e = setpoint - measured" line13="        this.i += e * dt" line14="        // Anti-Windup: Integrator leicht begrenzen" line15="        const iMax = 1023 / Math.max(1, this.ki)" line16="        if (this.i &gt; iMax) this.i = iMax" line17="        if (this.i &lt; -iMax) this.i = -iMax" line18="        const d = (e - this.lastE) / dt" line19="        let u = this.kp * e + this.ki * this.i + this.kd * d" line20="        this.lastE = e" line21="        if (u &gt; this.outMax) u = this.outMax" line22="        if (u &lt; this.outMin) u = this.outMin" line23="        // Kleine Totzone, damit 0 stabil bleibt" line24="        if (Math.abs(setpoint) &lt; 0.5 &amp;&amp; Math.abs(measured) &lt; 1.0) u = 0" line25="        return u" line26="    }" line27="}" numlines="28"></mutation><next><block type="typescript_statement" id="zjcGO=Sa(vh5B+e/;D$b"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let pidL = new PID(5.0, 1.5, 0.03)" numlines="1" declaredvars="pidL"></mutation><next><block type="typescript_statement" id="2EOkV|u(g?.Gj{)ZSsX?"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let pidR = new PID(5.0, 1.5, 0.03)" numlines="1" declaredvars="pidR"></mutation><next><block type="variables_set" id="@ZLx=Ty!h2I!isMSOKzK"><field name="VAR" id="^_C/Cdx7kVQdFB)Yf1pV">pidPeriodMs</field><value name="VALUE"><shadow type="math_number" id=")m(5Qi@|:rk@@EY{q@QA"><field name="NUM">20</field></shadow></value><next><block type="variables_set" id="qYQ@SQCbnBXW%IcVq/66"><field name="VAR" id="J8=ar[wijTU9-Q+dz|2H">lastPidMs</field><value name="VALUE"><shadow type="math_number" id="L*@/d-ihT1^oD};y?Hbh"><field name="NUM">0</field></shadow><block type="control_running_time" id="{Y$3YXi[,2/,PYRB$rc="></block></value><next><block type="typescript_statement" id="~}7tLCckW3FmSV)^Yt:w"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="function motorPWM(side: Motoren, power: number) {" line1="    // power: -1023 .. +1023; Vorzeichen = Richtung" line2="    let p = Math.idiv(Math.abs(power), 1)" line3="    if (p &gt; 1023) p = 1023" line4="    if (side == Motoren.Links) {" line5="        if (power &gt;= 0) {" line6="            pins.analogWritePin(LEFT_IN1, p)" line7="            pins.digitalWritePin(LEFT_IN2, 0)" line8="        } else {" line9="            pins.analogWritePin(LEFT_IN2, p)" line10="            pins.digitalWritePin(LEFT_IN1, 0)" line11="        }" line12="    } else if (side == Motoren.Rechts) {" line13="        if (power &gt;= 0) {" line14="            pins.analogWritePin(RIGHT_IN1, p)" line15="            pins.digitalWritePin(RIGHT_IN2, 0)" line16="        } else {" line17="            pins.analogWritePin(RIGHT_IN2, p)" line18="            pins.digitalWritePin(RIGHT_IN1, 0)" line19="        }" line20="    }" line21="}" numlines="22"></mutation><next><block type="typescript_statement" id="0ns)pAWS1(jM!YNfZx8P"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="function motorStop(side: Motoren, coast: boolean) {" line1="    if (side == Motoren.Links) {" line2="        pins.analogWritePin(LEFT_IN1, 0)" line3="        pins.analogWritePin(LEFT_IN2, 0)" line4="        pins.digitalWritePin(LEFT_IN1, coast ? 0 : 1)" line5="        pins.digitalWritePin(LEFT_IN2, coast ? 0 : 1)" line6="    } else if (side == Motoren.Rechts) {" line7="        pins.analogWritePin(RIGHT_IN1, 0)" line8="        pins.analogWritePin(RIGHT_IN2, 0)" line9="        pins.digitalWritePin(RIGHT_IN1, coast ? 0 : 1)" line10="        pins.digitalWritePin(RIGHT_IN2, coast ? 0 : 1)" line11="    }" line12="}" numlines="13"></mutation><next><block type="typescript_statement" id="kV5BR:614^NDk/9.k#qf"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="function motorsStop(motoren: Motoren, coast: boolean) {" line1="    if (motoren == Motoren.Links || motoren == Motoren.Beide) motorStop(Motoren.Links, coast)" line2="    if (motoren == Motoren.Rechts || motoren == Motoren.Beide) motorStop(Motoren.Rechts, coast)" line3="}" numlines="4"></mutation><next><block type="typescript_statement" id="cSi-q[j!I3r:lttF(24A"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="function forward(turns: number, motoren: Motoren, direction: Direction, coast: boolean) {" line1="    const rpmTarget = DEFAULT_RPM" line2="    const sign = (direction == Direction.Forward) ? 1 : -1" line3="" line4="    // Sollwerte setzen" line5="    if (motoren == Motoren.Links || motoren == Motoren.Beide) setRpmL = sign * rpmTarget" line6="    else setRpmL = 0" line7="    if (motoren == Motoren.Rechts || motoren == Motoren.Beide) setRpmR = sign * rpmTarget" line8="    else setRpmR = 0" line9="" line10="    const startL = ticksL" line11="    const startR = ticksR" line12="    const targetTicksL = (motoren == Motoren.Links || motoren == Motoren.Beide) ? Math.abs(Math.round(turns * PPR_L)) : 0" line13="    const targetTicksR = (motoren == Motoren.Rechts || motoren == Motoren.Beide) ? Math.abs(Math.round(turns * PPR_R)) : 0" line14="" line15="    // Optional: einfache Synchronisierung beider Seiten" line16="    const syncGain = 0.2" line17="" line18="    while (true) {" line19="        const progL = Math.abs(ticksL - startL)" line20="        const progR = Math.abs(ticksR - startR)" line21="" line22="        if ((motoren == Motoren.Beide &amp;&amp; progL &gt;= targetTicksL &amp;&amp; progR &gt;= targetTicksR)" line23="            || (motoren == Motoren.Links &amp;&amp; progL &gt;= targetTicksL)" line24="            || (motoren == Motoren.Rechts &amp;&amp; progR &gt;= targetTicksR)) {" line25="            break" line26="        }" line27="" line28="        if (motoren == Motoren.Beide) {" line29="            const diff = (progL - progR)" line30="            setRpmL = sign * (rpmTarget - syncGain * diff)" line31="            setRpmR = sign * (rpmTarget + syncGain * diff)" line32="        }" line33="        basic.pause(5)" line34="    }" line35="" line36="    // Stopp" line37="    setRpmL = 0" line38="    setRpmR = 0" line39="    pidL.reset(); pidR.reset()" line40="    motorsStop(motoren, coast)" line41="}" numlines="42"></mutation><next><block type="typescript_statement" id="kE#w$iI82Aa}Va6^KQhL"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="function drive(seconds: number, rpm: number, motoren: Motoren, direction: Direction, coast: boolean) {" line1="    const sign2 = (direction == Direction.Forward) ? 1 : -1" line2="    const endAt = control.millis() + Math.max(0, Math.round(seconds * 1000))" line3="" line4="    if (motoren == Motoren.Links || motoren == Motoren.Beide) setRpmL = sign2 * rpm" line5="    else setRpmL = 0" line6="    if (motoren == Motoren.Rechts || motoren == Motoren.Beide) setRpmR = sign2 * rpm" line7="    else setRpmR = 0" line8="" line9="    while (control.millis() &lt; endAt) basic.pause(5)" line10="" line11="    setRpmL = 0" line12="    setRpmR = 0" line13="    pidL.reset(); pidR.reset()" line14="    motorsStop(motoren, coast)" line15="}" numlines="16"></mutation><next><block type="typescript_statement" id="1Yh{%2G|j?kN!_9uYlkJ"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="function turn(dir: Dir, gradzahl: number, rpm: number, coast: boolean) {" line1="    // In-Place Drehung (Gegendrehen der Räder)" line2="    const theta = Math.abs(gradzahl) * Math.PI / 180 // rad" line3="    const s = (TRACK_WIDTH_MM / 2) * theta // Weg je Rad" line4="    const wheelCirc = Math.PI * WHEEL_DIAMETER_MM" line5="    const wheelTurns = s / wheelCirc // Umdrehungen je Rad" line6="" line7="    const ticksNeededL = Math.round(wheelTurns * PPR_L)" line8="    const ticksNeededR = Math.round(wheelTurns * PPR_R)" line9="" line10="    const signLeft = (dir == Dir.Links) ? -1 : 1" line11="    const signRight = (dir == Dir.Links) ? 1 : -1" line12="" line13="    const startL2 = ticksL" line14="    const startR2 = ticksR" line15="" line16="    setRpmL = signLeft * rpm" line17="    setRpmR = signRight * rpm" line18="" line19="    while (true) {" line20="        const progL2 = Math.abs(ticksL - startL2)" line21="        const progR2 = Math.abs(ticksR - startR2)" line22="        if (progL2 &gt;= ticksNeededL &amp;&amp; progR2 &gt;= ticksNeededR) break" line23="        basic.pause(5)" line24="    }" line25="" line26="    setRpmL = 0" line27="    setRpmR = 0" line28="    pidL.reset(); pidR.reset()" line29="    motorsStop(Motoren.Beide, coast)" line30="}" numlines="31"></mutation><next><block type="typescript_statement" id="gxY7MgM|q5T*`/x(V+,Z"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="function setMotorPins(leftIn1: DigitalPin, leftIn2: DigitalPin, rightIn1: DigitalPin, rightIn2: DigitalPin, sleepPin: DigitalPin) {" line1="    LEFT_IN1 = leftIn1; LEFT_IN2 = leftIn2; RIGHT_IN1 = rightIn1; RIGHT_IN2 = rightIn2; SLP = sleepPin" line2="}" numlines="3"></mutation><next><block type="typescript_statement" id="h9/=vP:VaAZ5I9bp}]4W"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="function setEncoderPins(leftA: DigitalPin, leftB: DigitalPin, rightA: DigitalPin, rightB: DigitalPin, invertLeft: boolean, invertRight: boolean) {" line1="    L_A = leftA; L_B = leftB; R_A = rightA; R_B = rightB; INVERT_LEFT = invertLeft; INVERT_RIGHT = invertRight" line2="}" numlines="3"></mutation><next><block type="function_call" id="JE1FiT7p0q`$.H.B`~V+"><mutation name="setup" functionid="$ftP!=R(r~#kbKhvQTCR"></mutation><comment pinned="false" h="80" w="160">Auto-Setup beim Start</comment></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="control_in_background" id="~V$,B;YRuwpArYjnT`@*" x="1381" y="20"><comment pinned="false" h="80" w="160">==== Periodische PID-Regelschleife ====</comment><statement name="HANDLER"><block type="device_while" id="bUsoB9Pk-cee)`dm]B[l"><value name="COND"><shadow type="logic_boolean" id="4(V0M!?]H-[15IHklkqz"><field name="BOOL">TRUE</field></shadow></value><statement name="DO"><block type="variables_set" id="qp@`c|rko*_R:zeN(W*B"><field name="VAR" id="wyg-9GTZj13.h[39P,F1">now</field><value name="VALUE"><shadow type="math_number" id="l0oBr.QKAbKO3IW#hhlC"><field name="NUM">0</field></shadow><block type="control_running_time" id="m8y[zBBT.-P^5rwcewOu"></block></value><next><block type="variables_set" id="led3Pz0.io=e!Su7#=9r"><field name="VAR" id="7leC#-KsQ:=KByR9T)O4">dt2</field><value name="VALUE"><shadow type="math_number" id="}m0yL+r|sf?R?%Pv|jt0"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="tlhAj926|neoG5ci]5wc"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="TR1uX-b?so(Vlyf?BpVQ"><field name="NUM">0</field></shadow><block type="variables_get" id="HCB;g=cAs`,2.#MFC1pS"><field name="VAR" id="wyg-9GTZj13.h[39P,F1">now</field></block></value><value name="B"><shadow type="math_number" id="3$9Kvn^ww]2t.7jJ)=.."><field name="NUM">0</field></shadow><block type="variables_get" id="BG7k+?p=#q(?N`iF[p!]"><field name="VAR" id="J8=ar[wijTU9-Q+dz|2H">lastPidMs</field></block></value></block></value><next><block type="controls_if" id="?fkCb=?^C-K5c:H}eLMi"><value name="IF0"><shadow type="logic_boolean" id="o;$r@`Rv^lkdr#l}z*rr"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="hS|W?VQ1N$BePrLV|i{-"><field name="OP">GTE</field><value name="A"><shadow type="math_number" id="Z.}WsN~c=IFu8Mgqfdow"><field name="NUM">0</field></shadow><block type="variables_get" id="9YC(iy$pg8%?B]GFO3ur"><field name="VAR" id="7leC#-KsQ:=KByR9T)O4">dt2</field></block></value><value name="B"><shadow type="math_number" id="5@;+^sG[l$bi$AlbaV*O"><field name="NUM">0</field></shadow><block type="variables_get" id="cl=S(lNy@^@kD54I?$3K"><field name="VAR" id="^_C/Cdx7kVQdFB)Yf1pV">pidPeriodMs</field></block></value></block></value><statement name="DO0"><block type="variables_set" id="/xEn`Kvu~ycsJ^$|Z6I8"><field name="VAR" id="vf;]+o__WRvEX,HmuB$V">dL</field><value name="VALUE"><shadow type="math_number" id="[sOd%H~1s1m(804NEJz*"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="/,-]r-}/]x*czoXbto/J"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="$(c`)GP]s-$.rM6?%N@V"><field name="NUM">0</field></shadow><block type="variables_get" id="jqga,vfp(/(#)t9=9Jmq"><field name="VAR" id="`pBtjpP-Ei3F0vj{h?v}">ticksL</field></block></value><value name="B"><shadow type="math_number" id="Np8DCIA9yK^?V=5.:s~g"><field name="NUM">0</field></shadow><block type="variables_get" id="|uwXklMn_hlO+A9:pFem"><field name="VAR" id="#E+#+_/w/f=:TV`)5hbC">lastTicksL</field></block></value></block></value><next><block type="variables_set" id="I{,yPgZ[$@n8CiE*4M7D"><field name="VAR" id="w*Rt%3ASSMC]k^}+@75[">dR</field><value name="VALUE"><shadow type="math_number" id="^L)0usJ.QHZKR3;1mYvB"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="qU|ve-l$rp4$c!VSB4]d"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="UgduGq!,U6Y;Ts6wEfo?"><field name="NUM">0</field></shadow><block type="variables_get" id=")7Xr48ued$j~?TY3h~SQ"><field name="VAR" id=";ENffnQgd%Eu^s0joRFZ">ticksR</field></block></value><value name="B"><shadow type="math_number" id="#yv@9!(d|_qrX`8_Ohvb"><field name="NUM">0</field></shadow><block type="variables_get" id="xX5YfJqedoJRW}y5F)Bh"><field name="VAR" id="{|-G#G|bS1Da]1!j4S`f">lastTicksR</field></block></value></block></value><next><block type="variables_set" id="h|X]T8x2+N5-1ZZ:7`rZ"><field name="VAR" id="#E+#+_/w/f=:TV`)5hbC">lastTicksL</field><value name="VALUE"><shadow type="math_number" id=".0*81Nl=Yx~w)C;FQoTy"><field name="NUM">0</field></shadow><block type="variables_get" id="@[[OPA(bYWbaB1e)Q(Y1"><field name="VAR" id="`pBtjpP-Ei3F0vj{h?v}">ticksL</field></block></value><next><block type="variables_set" id="sz8F3-}Dnn,ytrq2HPIT"><field name="VAR" id="{|-G#G|bS1Da]1!j4S`f">lastTicksR</field><value name="VALUE"><shadow type="math_number" id="VmPzpGMd,EqMh5gcsM2c"><field name="NUM">0</field></shadow><block type="variables_get" id=":^I@WfQ-X[;=A,JZszlv"><field name="VAR" id=";ENffnQgd%Eu^s0joRFZ">ticksR</field></block></value><next><block type="typescript_statement" id="qAETeD|W:^CTlC0HR0OM"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="rpmL = PPR_L &gt; 0 ? (dL * 60000) / (PPR_L * dt2) : 0" numlines="1"></mutation><next><block type="typescript_statement" id="uGt?Sp(w,}T!Q6@FJtKg"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="rpmR = PPR_R &gt; 0 ? (dR * 60000) / (PPR_R * dt2) : 0" numlines="1"></mutation><next><block type="typescript_statement" id="Ol`h8;D]UxU:n**%:peO"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="const uL = pidL.update(setRpmL, rpmL, dt2)" numlines="1" declaredvars="uL"></mutation><next><block type="typescript_statement" id="VMKlEkQHyGKj~pCy6k=9"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="const uR = pidR.update(setRpmR, rpmR, dt2)" numlines="1" declaredvars="uR"></mutation><next><block type="controls_if" id="2w$z3[7nDddv-S}OyND6"><value name="IF0"><shadow type="logic_boolean" id=",YoD,Te^oLZI=yXQFaMA"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id=".4%yG^4W[|p;JH]A-FVc"><field name="VAR" id="Hzx=J[{z4B`v6uGdXxur">drvOn</field></block></value><statement name="DO0"><block type="typescript_statement" id="_o4)GE*!ii9v2!g+u5V;"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="motorPWM(Motoren.Links, uL)" numlines="1"></mutation><next><block type="typescript_statement" id="0zi;CbP78@fH,Pe#JP+d"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="motorPWM(Motoren.Rechts, uR)" numlines="1"></mutation></block></next></block></statement><next><block type="variables_set" id="86}6-(?]p:QB0k27DCpB"><field name="VAR" id="J8=ar[wijTU9-Q+dz|2H">lastPidMs</field><value name="VALUE"><shadow type="math_number" id="WE}*Cc1;|B|A.5?c(V*."><field name="NUM">0</field></shadow><block type="variables_get" id="r8z.OV|oUB*GWubeHcF-"><field name="VAR" id="wyg-9GTZj13.h[39P,F1">now</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><next><block type="device_pause" id="t%Yd~]4P6CR|G~X]W;$I"><value name="pause"><shadow type="timePicker" id="^*K$AE^0szN[7wM^q=qk"><field name="ms">1</field></shadow></value></block></next></block></next></block></next></block></statement></block></statement></block><block type="device_button_selected_event" id="H%);_HF1VJiKA]tB^$:Z" x="1983" y="20"><field name="NAME">Button.A</field><comment pinned="false" h="80" w="160">==== Beispiel-Demo (optional) ====</comment><value name="eventType"><shadow type="control_button_event_click" id="X9?^m6N5gV(n1A!!5vM#"></shadow></value><statement name="HANDLER"><block type="serial_writeline" id="]H?f)?fQp@x;S9v^yG/3"><value name="text"><shadow type="text" id="U8}gReTWQ`CG^b2DrS.,"><field name="TEXT">Demo: 1 Umdrehung vorwärts, beide, Brake</field></shadow></value><next><block type="typescript_statement" id="7v(Vbyk9#6{I7bq3iuc="><mutation xmlns="http://www.w3.org/1999/xhtml" line0="forward(1.0, Motoren.Beide, Direction.Forward, false)" numlines="1"></mutation><next><block type="device_pause" id="$O5lqYwrz(E_b-W]v~Tp"><value name="pause"><shadow type="timePicker" id="}fbLd{-_$?HG=1Y0_s+7"><field name="ms">300</field></shadow></value><next><block type="serial_writeline" id="_*s[Jpea7fJjVWxnjYLg"><value name="text"><shadow type="text" id="a*Q7`(|$e,IPaf$V^:G9"><field name="TEXT">Demo: 2 s @ 40 RPM rückwärts, links, Coast</field></shadow></value><next><block type="typescript_statement" id="sk7OW5KW[E,]NPk6dPBR"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="drive(2, 40, Motoren.Links, Direction.Backwards, true)" numlines="1"></mutation><next><block type="device_pause" id="R~HdFmRH1F*WKNy9z*s4"><value name="pause"><shadow type="timePicker" id="(HH3]ud:[0x0U6J3Jg2b"><field name="ms">300</field></shadow></value><next><block type="serial_writeline" id="}D(X$lMeEo]9]x)}_V2|"><value name="text"><shadow type="text" id="*[/8x(v,Aq|@bgOa7QG{"><field name="TEXT">Demo: 90° Links-Drehung @ 50 RPM, Brake</field></shadow></value><next><block type="typescript_statement" id="Uo7L01g;#nY=kTtLS;(O"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="turn(Dir.Links, 90, 50, false)" numlines="1"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="psT?,Xy]H!ImZ]xE{Z03" x="2668" y="20"><mutation name="drvEnable" functionid="nBX,^qORxFy]dIyeGflH"><arg name="on" id="pfgpd33w27z1qb3pwxhen" type="boolean"></arg></mutation><field name="function_name">drvEnable</field><comment pinned="false" h="80" w="160">==== Low-Level Motorsteuerung ====</comment><value name="pfgpd33w27z1qb3pwxhen"><block type="argument_reporter_boolean" id="Lac_=W0hae(LhF:z-ph~"><mutation duplicateondrag="true"></mutation><field name="VALUE">on</field></block></value><statement name="STACK"><block type="variables_set" id="lefJ+DAV-k[}gy6.[UDY"><field name="VAR" id="Hzx=J[{z4B`v6uGdXxur">drvOn</field><value name="VALUE"><shadow type="math_number" id="7RpxWIpqZnAj~G~(p.ds"><field name="NUM">0</field></shadow><block type="argument_reporter_boolean" id="ny1%RMrP}BTF`)QcYTcB"><field name="VALUE">on</field></block></value><next><block type="device_set_digital_pin" id="yXxP{y(tQS,qU|-@|B0="><value name="name"><shadow type="digital_pin_shadow" id="wuR/Z/R$-:dJz`gE.4r)"><field name="pin">DigitalPin.P0</field></shadow><block type="variables_get" id=";;vRYW}FVjDshrq)JxF1"><field name="VAR" id="7bbduCH]326vk@lUN{h+">SLP</field></block></value><value name="value"><shadow type="math_number_minmax" id="hM8Q9^fQWzb52LS|O6wN"><mutation min="0" max="1" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="typescript_expression" id=",v$fQ_VdASTA*A/@K(Kg"><field name="EXPRESSION">on ? 1 : 0</field></block></value></block></next></block></statement></block><block type="function_definition" id="ju-R-~DYmv4ciDdl1e~q" x="3248" y="20"><mutation name="handleEdgeLeft" functionid="fxb3-@~HCIg:(ru9?[$D"></mutation><field name="function_name">handleEdgeLeft</field><comment pinned="false" h="80" w="160">==== Encoder-ISR ====</comment><statement name="STACK"><block type="variables_set" id="qOLCmF}3=ro112G4sh-b"><field name="VAR" id="W;FwW~N`6tr(8P(y)Go0">b</field><value name="VALUE"><shadow type="math_number" id="efmNJ1Dm:B|$oO7SvPZb"><field name="NUM">0</field></shadow><block type="device_get_digital_pin" id="%9-S@J!C?#p{19h#@llg"><value name="name"><shadow type="digital_pin_shadow" id="a5B^Ta9(Eetci#?t%(~q"><field name="pin">DigitalPin.P0</field></shadow><block type="variables_get" id="mB[AHfmqC(uc5A)aoO_C"><field name="VAR" id="N%1o%_N5SiQ9u?/zpNQP">L_B</field></block></value></block></value><next><block type="typescript_statement" id="6rD*FpOyImx%33kY}*1,"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="const step = (b ^ (INVERT_LEFT ? 1 : 0)) ? 1 : -1" numlines="1" declaredvars="step"></mutation><next><block type="variables_change" id="pbr|8b)U*w$|B~8mezmU"><field name="VAR" id="`pBtjpP-Ei3F0vj{h?v}">ticksL</field><value name="VALUE"><shadow type="math_number" id="!t*|O$=PXs_AR;J58PNL"><field name="NUM">0</field></shadow><block type="variables_get" id="H?a59;*TtRj9LoslG0Ch"><field name="VAR" id="W,8tdwfFeiIr(H(ZC{AA">step</field></block></value></block></next></block></next></block></statement></block><block type="function_definition" id="U[nFKSrVv,r3)Tno.}h1" x="3756" y="20"><mutation name="handleEdgeRight" functionid="Q!7`P)4,;@tw)``NO-,|"></mutation><field name="function_name">handleEdgeRight</field><statement name="STACK"><block type="variables_set" id="Bu~Q1+/MAq/KD7ry|u8v"><field name="VAR" id="3#]IKQPslAXw7RdIBw)n">c</field><value name="VALUE"><shadow type="math_number" id="Lh?uqUwuGk{;TB/6o`j("><field name="NUM">0</field></shadow><block type="device_get_digital_pin" id=",rta-?#E0)xD/JFW{gw1"><value name="name"><shadow type="digital_pin_shadow" id="yC;/=W8$Hetd,0`l(^1Q"><field name="pin">DigitalPin.P0</field></shadow><block type="variables_get" id="vMcc*z.ZJRk?CnB#dbQ?"><field name="VAR" id="v{yk]0)?K0$Y{VF3sn/%">R_B</field></block></value></block></value><next><block type="typescript_statement" id="H0k%Q6X_Y*ZZFIV6dk?w"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="const step2 = (c ^ (INVERT_RIGHT ? 1 : 0)) ? 1 : -1" numlines="1" declaredvars="step2"></mutation><next><block type="variables_change" id="^F*8W-EttOhL-6p#I3f="><field name="VAR" id=";ENffnQgd%Eu^s0joRFZ">ticksR</field><value name="VALUE"><shadow type="math_number" id="2H)ll;6!hju*FMSE*c.M"><field name="NUM">0</field></shadow><block type="variables_get" id="F[tFlPs:lIMHACina@.*"><field name="VAR" id=".?n4b.SyNme{S5YF*m#k">step2</field></block></value></block></next></block></next></block></statement></block><block type="function_definition" id="8lZ[odd^nnS#0v.[%-LX" x="4282" y="20"><mutation name="encodersInit" functionid="m)mEX:i+Wj`hQA}nf16p"></mutation><field name="function_name">encodersInit</field><statement name="STACK"><block type="device_set_pull" id="jXCtUtQE))e-:vdzg2_t"><field name="pull">PinPullMode.PullUp</field><value name="pin"><shadow type="digital_pin_shadow" id="ngRt!hAO%*N1Em7qkgO!"><field name="pin">DigitalPin.P0</field></shadow><block type="variables_get" id="F`+rrIyNOxmH,DFo7Edo"><field name="VAR" id="_W3LD7@JPO[~J)E[8ZtR">L_A</field></block></value><next><block type="device_set_pull" id="5+Hw=Z%,(]if$xLqcWf6"><field name="pull">PinPullMode.PullUp</field><value name="pin"><shadow type="digital_pin_shadow" id="4gslWd0)0{bd{Plc*zV?"><field name="pin">DigitalPin.P0</field></shadow><block type="variables_get" id="~5{I*_k4HAI{1A09;(|M"><field name="VAR" id="N%1o%_N5SiQ9u?/zpNQP">L_B</field></block></value><next><block type="device_set_pull" id="n]oscusP/Ivk@X]{;q1R"><field name="pull">PinPullMode.PullUp</field><value name="pin"><shadow type="digital_pin_shadow" id="EdITU|vM{z{3WH{[J|+F"><field name="pin">DigitalPin.P0</field></shadow><block type="variables_get" id="w`Y;7%Z8}XVW:RQMz|y2"><field name="VAR" id="WF[%)}OF^w0~[/P{QeLg">R_A</field></block></value><next><block type="device_set_pull" id="*wF1wtu+@*9MNA/cH+-S"><field name="pull">PinPullMode.PullUp</field><value name="pin"><shadow type="digital_pin_shadow" id="]MoETQY*I0I`dZ9LuD?["><field name="pin">DigitalPin.P0</field></shadow><block type="variables_get" id="UA,CL|g%j.u|+QG{d!]y"><field name="VAR" id="v{yk]0)?K0$Y{VF3sn/%">R_B</field></block></value><next><block type="typescript_statement" id="PT]luHF+OVRlGA?Q7)#J"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="pins.onPulsed(L_A, PulseValue.High, function () { handleEdgeLeft() })" numlines="1"></mutation><next><block type="typescript_statement" id="hQ8=xsB0N{Gyf@jikw,U"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="pins.onPulsed(L_A, PulseValue.Low, function () { handleEdgeLeft() })" numlines="1"></mutation><next><block type="typescript_statement" id="v@iJjGK3C@5$uc|*8dl{"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="pins.onPulsed(R_A, PulseValue.High, function () { handleEdgeRight() })" numlines="1"></mutation><next><block type="typescript_statement" id="ifz{0P;EomC*M{DQJ[$r"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="pins.onPulsed(R_A, PulseValue.Low, function () { handleEdgeRight() })" numlines="1"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="E=BQ}eWT+Qp~TI^Vja2-" x="4974" y="20"><mutation name="setPulsesPerRev" functionid="{ZQ6_)VCc9tTK_dPtvFp"><arg name="pprLeft" id="4hz4w7dyu2wtffi5guyph" type="number"></arg><arg name="pprRight" id="ad3jpjmqyakv3bkdas9gy" type="number"></arg></mutation><field name="function_name">setPulsesPerRev</field><value name="4hz4w7dyu2wtffi5guyph"><block type="argument_reporter_number" id="llAmYv(OG1WwSwI}?LmP"><mutation duplicateondrag="true"></mutation><field name="VALUE">pprLeft</field></block></value><value name="ad3jpjmqyakv3bkdas9gy"><block type="argument_reporter_number" id="lr,0r2M#7TDi(mMaH(UP"><mutation duplicateondrag="true"></mutation><field name="VALUE">pprRight</field></block></value><statement name="STACK"><block type="variables_set" id="TXV$Qxi:/@[]vd}?|)(g"><field name="VAR" id="Z~xLIw]@-1oB^VK6nN5=">PPR_L</field><value name="VALUE"><shadow type="math_number" id="Vj)~P-,d$H8|F]+^-+E9"><field name="NUM">0</field></shadow><block type="math_op2" id="|tXlBSjv!ig`TBDJ]}K$"><field name="op">max</field><value name="x"><shadow type="math_number" id=",~8YIFA`rnH2EMs~f.?h"><field name="NUM">1</field></shadow></value><value name="y"><block type="math_js_round" id="K4YrI;,c=lNtuWIz3#x-"><field name="OP">round</field><value name="ARG0"><shadow type="math_number" id="_:#Lc(],RBT8/3Tg+{D1"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="Iy.or2GXb{Ji;W}e]^Za"><field name="VALUE">pprLeft</field></block></value></block></value></block></value><next><block type="variables_set" id="=Twdi4}_~]xqK:;2Z$++"><field name="VAR" id="Wc@~Y_2|L;BDr`[k|_eb">PPR_R</field><value name="VALUE"><shadow type="math_number" id="{qJs3/Q+AZEBm(?:d%ZW"><field name="NUM">0</field></shadow><block type="math_op2" id="]fBXYTDhi:Ct/Rr3_+(("><field name="op">max</field><value name="x"><shadow type="math_number" id="|m+VBo3OA{2$esDj#HpU"><field name="NUM">1</field></shadow></value><value name="y"><block type="math_js_round" id="WbG2+JY[mJSl+}Ab$0vC"><field name="OP">round</field><value name="ARG0"><shadow type="math_number" id="UESe)$/m~-L}]$QJuO7F"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="5[GGEyP3wg5@;5`t#zO5"><field name="VALUE">pprRight</field></block></value></block></value></block></value></block></next></block></statement></block><block type="function_definition" id="T*EU+uh:5dUp`TaqpEE(" x="5671" y="20"><mutation name="setPID" functionid="?E;hK7/-LuDR-ZC{k1Cc"><arg name="kpL" id="b84f44izj56vhitc65t4g" type="number"></arg><arg name="kiL" id="ajw4kyrv4cb3izwr8cu4" type="number"></arg><arg name="kdL" id="9j29096z8c5qshv8e42nng" type="number"></arg><arg name="kpR" id="34b7p2dkirfygczsehfj" type="number"></arg><arg name="kiR" id="qen3yb2a1o45mu86ykgn4" type="number"></arg><arg name="kdR" id="mj5uh9zged2hhg016291" type="number"></arg></mutation><field name="function_name">setPID</field><value name="b84f44izj56vhitc65t4g"><block type="argument_reporter_number" id="tTO5^~[o8d])(K7N02]e"><mutation duplicateondrag="true"></mutation><field name="VALUE">kpL</field></block></value><value name="ajw4kyrv4cb3izwr8cu4"><block type="argument_reporter_number" id="f1@o,Qe[*t`1s{uyVToa"><mutation duplicateondrag="true"></mutation><field name="VALUE">kiL</field></block></value><value name="9j29096z8c5qshv8e42nng"><block type="argument_reporter_number" id="ad0ul:b3~,t~)Yog81fS"><mutation duplicateondrag="true"></mutation><field name="VALUE">kdL</field></block></value><value name="34b7p2dkirfygczsehfj"><block type="argument_reporter_number" id="w2/+XJU*ps=^%v7;*EkS"><mutation duplicateondrag="true"></mutation><field name="VALUE">kpR</field></block></value><value name="qen3yb2a1o45mu86ykgn4"><block type="argument_reporter_number" id="LTiPA)ncmUgPu1piA-B="><mutation duplicateondrag="true"></mutation><field name="VALUE">kiR</field></block></value><value name="mj5uh9zged2hhg016291"><block type="argument_reporter_number" id="RA%EdFlHSr3I2;hLx]5p"><mutation duplicateondrag="true"></mutation><field name="VALUE">kdR</field></block></value><statement name="STACK"><block type="typescript_statement" id="eeh*Q/4).t%u@_5hK!6x"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="pidL = new PID(kpL, kiL, kdL)" numlines="1"></mutation><next><block type="typescript_statement" id="adBb*wsm5g$w=`xoi$5p"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="pidR = new PID(kpR, kiR, kdR)" numlines="1"></mutation></block></next></block></statement></block><block type="function_definition" id="`-?~mi+8s_.HzY$8IuVX" x="20" y="8137"><mutation name="setGeometry" functionid="2_YFt!g@Hbn$E0y6!Peo"><arg name="wheelDiameterMM" id="ptk5yk5ryptlbbz417jd4l" type="number"></arg><arg name="trackWidthMM" id="s8f369efvw1hhtks1vny" type="number"></arg></mutation><field name="function_name">setGeometry</field><value name="ptk5yk5ryptlbbz417jd4l"><block type="argument_reporter_number" id="$YdbMU[Y{dpO`I%u^,G|"><mutation duplicateondrag="true"></mutation><field name="VALUE">wheelDiameterMM</field></block></value><value name="s8f369efvw1hhtks1vny"><block type="argument_reporter_number" id="%Y;08r;P+Sz|]XhUW6v}"><mutation duplicateondrag="true"></mutation><field name="VALUE">trackWidthMM</field></block></value><statement name="STACK"><block type="variables_set" id="$/}Lm;5WAGs7S01KV_FU"><field name="VAR" id="JOi6`~+X,o|;c1|S@(gA">WHEEL_DIAMETER_MM</field><value name="VALUE"><shadow type="math_number" id="yaD)L$ymu%o#[W2:XWTe"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="K?EaoC)}S=vm*$DaEH,s"><field name="VALUE">wheelDiameterMM</field></block></value><next><block type="variables_set" id="Ny/TMwryfCDCd1iEyXrp"><field name="VAR" id="lUmHAt{H32p-E-yW.bC/">TRACK_WIDTH_MM</field><value name="VALUE"><shadow type="math_number" id="dfG+RtUmU*;K@e6r]z3;"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="aFqcfCLu4tr=L?K6kxq}"><field name="VALUE">trackWidthMM</field></block></value></block></next></block></statement></block><block type="function_definition" id="+JRPg~6u0hr!_VGf2?)9" x="606" y="8137"><mutation name="setDefaultRPM" functionid="]e8~r@I0sQrpj=n(_37#"><arg name="rpm" id="nq8dxwrb6n50n9ryhlfk" type="number"></arg></mutation><field name="function_name">setDefaultRPM</field><value name="nq8dxwrb6n50n9ryhlfk"><block type="argument_reporter_number" id=",jg)C@Oqpw|]Ww,-=b0A"><mutation duplicateondrag="true"></mutation><field name="VALUE">rpm</field></block></value><statement name="STACK"><block type="variables_set" id="hgLPVxD=#]R[[}sLc6U5"><field name="VAR" id="r3ZTxY`f3:7O;{KI]^RM">DEFAULT_RPM</field><value name="VALUE"><shadow type="math_number" id="jUp[`0G/RbD(1Yq6d/VV"><field name="NUM">0</field></shadow><block type="math_op2" id="VmJ}*l%VOak2)nTC%D}j"><field name="op">max</field><value name="x"><shadow type="math_number" id="u8u)E|+u[F7*eDes9geA"><field name="NUM">1</field></shadow></value><value name="y"><block type="math_op2" id="!4%U;zrg^4J9Z7(bF|l!"><field name="op">min</field><value name="x"><shadow type="math_number" id="aWO;K!10I:KCU-[Lgi2v"><field name="NUM">100</field></shadow></value><value name="y"><block type="math_js_round" id="]_g#Y@-[#(^S.YW`u^3t"><field name="OP">round</field><value name="ARG0"><shadow type="math_number" id="845d?}=Z.W8=[TvK0wY$"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="Q[2lK%QN9Y}ZcETpowdt"><field name="VALUE">rpm</field></block></value></block></value></block></value></block></value></block></statement></block><block type="function_definition" id="[3vlndy_F~j1lNTVNI$." x="1560" y="8137"><mutation name="setPidPeriodMs" functionid="L%d!^i$+5p$R@xJUd!b}"><arg name="period" id="doopz5f512g705kpmt1a88" type="number"></arg></mutation><field name="function_name">setPidPeriodMs</field><value name="doopz5f512g705kpmt1a88"><block type="argument_reporter_number" id="pl3.Z},E47!f/PHK8DO#"><mutation duplicateondrag="true"></mutation><field name="VALUE">period</field></block></value><statement name="STACK"><block type="variables_set" id="!c2g`+-r8X{yBJ[D[pCq"><field name="VAR" id="^_C/Cdx7kVQdFB)Yf1pV">pidPeriodMs</field><value name="VALUE"><shadow type="math_number" id="zk:G$F%*8!88ebtTyf`p"><field name="NUM">0</field></shadow><block type="math_op2" id="}!arH6MDlG!SVmwtV|}T"><field name="op">max</field><value name="x"><shadow type="math_number" id="l/|=m~|0%vG*V3l6did*"><field name="NUM">5</field></shadow></value><value name="y"><block type="math_op2" id=":MSz.C.gFFL0Uf+$V4J)"><field name="op">min</field><value name="x"><shadow type="math_number" id="f@;L{z;o=0):1za{s{j*"><field name="NUM">100</field></shadow></value><value name="y"><block type="math_js_round" id="n7Nn}F%KoPESC4g~$:SL"><field name="OP">round</field><value name="ARG0"><shadow type="math_number" id="RS$B3OQEQ|+-11KL?iF4"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="i37_h,g/k;F}MEW=Rj=d"><field name="VALUE">period</field></block></value></block></value></block></value></block></value></block></statement></block><block type="function_definition" id="s1pMcfRww[E~n|M1uhnO" x="2541" y="8137"><mutation name="setup" functionid="$ftP!=R(r~#kbKhvQTCR"></mutation><field name="function_name">setup</field><comment pinned="false" h="80" w="160">==== Setup/Init ====</comment><statement name="STACK"><block type="serial_redirect_to_usb" id="8+60A{IUjfm[x/vE9,s."><next><block type="serial_setbaudrate" id="T@W=_h@DSXO#Q1159N:7"><field name="rate">BaudRate.BaudRate115200</field><next><block type="function_call" id="-d5r!0:y7kM#Bq7+f[vR"><mutation name="encodersInit" functionid="m)mEX:i+Wj`hQA}nf16p"></mutation><next><block type="function_call" id="to;6r*zq(@_yE5$}T:}("><mutation name="drvEnable" functionid="nBX,^qORxFy]dIyeGflH"><arg name="on" id="pfgpd33w27z1qb3pwxhen" type="boolean"></arg></mutation><value name="pfgpd33w27z1qb3pwxhen"><shadow type="logic_boolean" id="2LQpRfN~_oELBj~cM2!N"><field name="BOOL">TRUE</field></shadow></value><next><block type="serial_writeline" id="k@?vP,[w;RD)a}S_3kAw"><value name="text"><shadow type="text" id="i-SI)F}O]RsO=x4=@Fyi"><field name="TEXT">Dualmotor-PID bereit.</field></shadow></value></block></next></block></next></block></next></block></next></block></statement></block></xml>